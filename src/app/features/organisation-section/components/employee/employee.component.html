<div class="p-4">
    <!-- Section Selection Buttons -->
    <!-- <div class="flex space-x-4 mb-4">
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="changeSection('employee')">Employee</button>
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="changeSection('department')">Department</button>
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="changeSection('position')">Position</button>
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="changeSection('skills')">Skills</button>
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="changeSection('reportingManagerHistory')">Reporting Manager History</button>
    </div> -->


    <!-- Employee Section -->
    <div *ngIf="selectedSection === 'employee'">
        <h3 class="text-xl font-semibold mb-4">Add New Employee</h3>

        <!-- Scrollable Form -->
        <form #employeeForm="ngForm" (ngSubmit)="submitEmployee(employeeForm); $event.preventDefault()">
            <div class="grid grid-cols-6 gap-4">

                <!-- Employee Code -->
                <div class="form-group">
                    <label>Employee Code*</label>
                    <input type="text" [(ngModel)]="employee.user_code" #userCode="ngModel" name="user_code" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (userCode.invalid && userCode.touched) || (employeeForm.submitted && userCode.invalid)}">
                    <span class="text-red-500 text-sm"
                        *ngIf="(userCode.invalid && userCode.touched) || (employeeForm.submitted && userCode.invalid)">
                        Employee Code is required
                    </span>
                </div>

                <!-- First Name -->
                <div class="form-group">
                    <label>First Name*</label>
                    <input type="text" [(ngModel)]="employee.user_first_name" #userFirstName="ngModel"
                        name="user_first_name" required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (userFirstName.invalid && userFirstName.touched) || (employeeForm.submitted && userFirstName.invalid)}">
                    <span class="text-red-500 text-sm"
                        *ngIf="(userFirstName.invalid && userFirstName.touched) || (employeeForm.submitted && userFirstName.invalid)">
                        First Name is required
                    </span>
                </div>

                <!-- Middle Name -->
                <div class="form-group">
                    <label>Middle Name</label>
                    <input type="text" [(ngModel)]="employee.user_middle_name" name="user_middle_name"
                        class="border p-2 w-full rounded-md">
                </div>

                <!-- Last Name -->
                <div class="form-group">
                    <label>Last Name*</label>
                    <input type="text" [(ngModel)]="employee.user_last_name" #userLastName="ngModel"
                        name="user_last_name" required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (userLastName.invalid && userLastName.touched) || (employeeForm.submitted && userLastName.invalid)}">
                    <span class="text-red-500 text-sm"
                        *ngIf="(userLastName.invalid && userLastName.touched) || (employeeForm.submitted && userLastName.invalid)">
                        Last Name is required
                    </span>
                </div>

                <!-- Email ID -->
                <div class="form-group">
                    <label>Email ID*</label>
                    <input type="email" [(ngModel)]="employee.user_email" #userEmail="ngModel" name="user_email"
                        required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (userEmail.invalid && userEmail.touched) || (employeeForm.submitted && userEmail.invalid)}">
                    <span class="text-red-500 text-sm"
                        *ngIf="(userEmail.invalid && userEmail.touched) || (employeeForm.submitted && userEmail.invalid)">
                        Valid Email is required
                    </span>
                </div>

                <!-- Contact Number -->
                <div class="form-group">
                    <label>Contact Number*</label>
                    <input type="text" [(ngModel)]="employee.user_contact" #userContact="ngModel" name="user_contact"
                        required pattern="^[0-9]{10}$" class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (userContact.invalid && userContact.touched) || (employeeForm.submitted && userContact.invalid)}">
                    <span class="text-red-500 text-sm"
                        *ngIf="(userContact.invalid && userContact.touched) || (employeeForm.submitted && userContact.invalid)">
                        Enter a valid 10-digit phone number
                    </span>
                </div>

            </div>
            <!-- Submit Button -->
            <div class="mt-4">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded m-4">Save Employee</button>
            </div>

        </form>
        <div *ngIf="isEmployeeEditModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" (click)="closeEmployeeEditModal()">
            <div class="bg-white p-6 rounded-lg w-1/3" (click)="$event.stopPropagation()">
              <h3 class="text-xl font-semibold mb-4">Edit Employee</h3>
              <form #editEmployeeForm="ngForm" (ngSubmit)="updateEmployee(editEmployeeForm); $event.preventDefault()">
                <div class="grid grid-cols-6 gap-4">
                  <!-- Employee Code -->
                  <div class="form-group">
                    <label>Employee Code*</label>
                    <input type="text" [(ngModel)]="editEmployee.user_code" #editUserCode="ngModel" name="editUserCode" required
                      class="border p-2 w-full rounded-md"
                      [ngClass]="{'border-red-500': (editUserCode.invalid && editUserCode.touched) || (editEmployeeForm.submitted && editUserCode.invalid)}">
                    <span class="text-red-500 text-sm"
                      *ngIf="(editUserCode.invalid && editUserCode.touched) || (editEmployeeForm.submitted && editUserCode.invalid)">
                      Employee Code is required
                    </span>
                  </div>
          
                  <!-- First Name -->
                  <div class="form-group">
                    <label>First Name*</label>
                    <input type="text" [(ngModel)]="editEmployee.user_first_name" #editUserFirstName="ngModel"
                      name="editUserFirstName" required class="border p-2 w-full rounded-md"
                      [ngClass]="{'border-red-500': (editUserFirstName.invalid && editUserFirstName.touched) || (editEmployeeForm.submitted && editUserFirstName.invalid)}">
                    <span class="text-red-500 text-sm"
                      *ngIf="(editUserFirstName.invalid && editUserFirstName.touched) || (editEmployeeForm.submitted && editUserFirstName.invalid)">
                      First Name is required
                    </span>
                  </div>
          
                  <!-- Middle Name -->
                  <div class="form-group">
                    <label>Middle Name</label>
                    <input type="text" [(ngModel)]="editEmployee.user_middle_name" name="editUserMiddleName"
                      class="border p-2 w-full rounded-md">
                  </div>
          
                  <!-- Last Name -->
                  <div class="form-group">
                    <label>Last Name*</label>
                    <input type="text" [(ngModel)]="editEmployee.user_last_name" #editUserLastName="ngModel"
                      name="editUserLastName" required class="border p-2 w-full rounded-md"
                      [ngClass]="{'border-red-500': (editUserLastName.invalid && editUserLastName.touched) || (editEmployeeForm.submitted && editUserLastName.invalid)}">
                    <span class="text-red-500 text-sm"
                      *ngIf="(editUserLastName.invalid && editUserLastName.touched) || (editEmployeeForm.submitted && editUserLastName.invalid)">
                      Last Name is required
                    </span>
                  </div>
          
                  <!-- Email ID -->
                  <div class="form-group">
                    <label>Email ID*</label>
                    <input type="email" [(ngModel)]="editEmployee.user_email" #editUserEmail="ngModel" name="editUserEmail"
                      required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                      class="border p-2 w-full rounded-md"
                      [ngClass]="{'border-red-500': (editUserEmail.invalid && editUserEmail.touched) || (editEmployeeForm.submitted && editUserEmail.invalid)}">
                    <span class="text-red-500 text-sm"
                      *ngIf="(editUserEmail.invalid && editUserEmail.touched) || (editEmployeeForm.submitted && editUserEmail.invalid)">
                      Valid Email is required
                    </span>
                  </div>
          
                  <!-- Contact Number -->
                  <div class="form-group">
                    <label>Contact Number*</label>
                    <input type="text" [(ngModel)]="editEmployee.user_contact" #editUserContact="ngModel" name="editUserContact"
                      required pattern="^[0-9]{10}$" class="border p-2 w-full rounded-md"
                      [ngClass]="{'border-red-500': (editUserContact.invalid && editUserContact.touched) || (editEmployeeForm.submitted && editUserContact.invalid)}">
                    <span class="text-red-500 text-sm"
                      *ngIf="(editUserContact.invalid && editUserContact.touched) || (editEmployeeForm.submitted && editUserContact.invalid)">
                      Enter a valid 10-digit phone number
                    </span>
                  </div>
                </div>
                <div class="mt-4 flex justify-end">
                  <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2" (click)="closeEmployeeEditModal()">Cancel</button>
                  <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update</button>
                </div>
              </form>
            </div>
          </div>

        <div class="rounded-lg w-full overflow-x-auto p-2">

            <!-- Filters -->
            <div class="min-w-max">
                <div
                    class="flex flex-wrap items-center justify-between gap-x-2 gap-y-4 mb-4 py-2 bg-gray-50 rounded shadow-sm w-full">
                    <!-- Employee Code Filter -->
                    <div class="relative flex-grow">
                        <input type="text" [(ngModel)]="employeeCodeFilter" placeholder="Employee Code"
                            (input)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300" />
                        <button *ngIf="employeeCodeFilter" (click)="clearFilter('employeeCodeFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <!-- Name Filter -->
                    <!-- Name Filter Dropdown -->
                    <div class="relative flex-grow">
                        <select [(ngModel)]="nameFilter" (change)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300">
                            <option value="">Select Name</option>
                            <option *ngFor="let emp of optionUsers" [value]="emp.user_id">
                                {{ emp.user_first_name }} {{ emp.user_last_name }}
                            </option>
                        </select>
                        <button *ngIf="nameFilter" (click)="clearFilter('nameFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>


                    <!-- Email Filter -->
                    <div class="relative flex-grow">
                        <input type="text" [(ngModel)]="emailFilter" placeholder="Email" (input)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300" />
                        <button *ngIf="emailFilter" (click)="clearFilter('emailFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <!-- Department Filter -->
                    <!-- Department Filter -->
                    <div class="relative flex-grow">
                        <select [(ngModel)]="departmentFilter" (change)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300">
                            <option value="">Select Department</option>
                            <option *ngFor="let department of optionDepartments" [value]="department.department_id">
                                {{ department.department_name }}
                            </option>
                        </select>
                        <button *ngIf="departmentFilter" (click)="clearFilter('departmentFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <!-- Designation Filter -->
                    <!-- Designation Filter -->
                    <div class="relative flex-grow">
                        <select [(ngModel)]="designationFilter" (change)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300">
                            <option value="">Select Designation</option>
                            <option *ngFor="let designation of optionDesignation" [value]="designation.designation_id">
                                {{ designation.designation_name }}
                            </option>
                        </select>
                        <button *ngIf="designationFilter" (click)="clearFilter('designationFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <div class="relative flex-grow">
                        <input type="text" [(ngModel)]="addressFilter" placeholder="Address" (input)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300" />
                        <button *ngIf="addressFilter" (click)="clearFilter('addressFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <!-- Reporting Manager Filter -->
                    <div class="relative flex-grow">
                        <select [(ngModel)]="reportingManagerFilter" (change)="applyFilters()"
                            class="text-xs border border-gray-300 rounded px-1 py-1 w-full focus:outline-none focus:ring focus:ring-blue-300">
                            <option value="">Select Reporting Manager</option>
                            <option *ngFor="let rm of optionUsers" [value]="rm.user_id">
                                {{ rm.user_first_name }} {{ rm.user_last_name }}
                            </option>
                        </select>
                        <button *ngIf="reportingManagerFilter" (click)="clearFilter('reportingManagerFilter')"
                            class="absolute inset-y-0 right-0 px-2 flex items-center text-gray-500 hover:text-gray-700">
                            ×
                        </button>
                    </div>

                    <!-- Clear All Filters -->
                    <button (click)="clearFilters()"
                        class="text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 focus:outline-none flex-grow-0">Clear
                        All
                        Filters</button>
                </div>
            </div>

            <div class="rounded-lg w-full inline-block whitespace-nowrap">

                <table class="w-full border-collapse border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>
                            <th class="border p-2">Employee Code</th>
                            <th class="border p-2">Name</th>
                            <th class="border p-2">Email</th>
                            <th class="border p-2">Contact Number</th>
                            <th class="border p-2">Department</th>
                            <th class="border p-2">Current Address</th>
                            <th class="border p-2">Designation</th> <!-- Add Designation Column -->
                            <th class="border p-2">Reporting Manager</th>
                            <th class="border p-2">Date of Joining</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let employee of paginatedEmployees; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ employee.user_code }}</td>
                            <td class="border p-2">{{ employee.user_first_name }} {{ employee.user_last_name }}</td>
                            <td class="border p-2">{{ employee.user_email }}</td>
                            <td class="border p-2">{{ employee.user_contact }}</td>
                            <td class="border p-2">{{ employee.department_name }}</td>
                            <td class="border p-2">{{ employee.user_current_address }}</td>
                            <td class="border p-2">{{ employee.designation_name }}</td> <!-- Display Designation -->
                            <td class="border p-2">{{ employee.reporting_manager_first_name }} {{
                                employee.reporting_manager_last_name }}</td>
                            <td class="border p-2">{{ employee.user_DOJ | date:'dd-MMM-yyyy' }}</td>
                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded m-2"
                                    (click)="assignDetails(employee)">Assign Details</button>
                                    <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2" (click)="openEmployeeEditModal(employee)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteEmployee(employee.user_id)">Delete</button>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Pagination -->
            <div class="flex items-center justify-center mt-4 space-x-1">
                <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1"
                    class="px-3 py-1 border rounded-md">
                    Previous
                </button>
                <button *ngFor="let page of getVisiblePageNumbers()" (click)="changePage(page)"
                    [class.bg-blue-500]="currentPage === page" class="px-3 py-1 border rounded-md">
                    {{ page }}
                </button>
                <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages"
                    class="px-3 py-1 border rounded-md">
                    Next
                </button>
            </div>
            <!-- Edit Modal -->

        </div>
        <!-- <th class="border p-2">Emergency Contact</th>
                    <th class="border p-2">Role</th> -->

        <!-- <th class="border p-2">Passport</th>
                    <th class="border p-2">Passport Validity</th>
                    <th class="border p-2">Date of Birth</th>
                    <th class="border p-2">Blood Group</th> -->
        <!-- <td class="border p-2">{{ employee.user_emergency_contact }}</td>
                    <td class="border p-2">{{ employee.role_name }}</td> -->
        <!-- <td class="border p-2">{{ employee.is_passport ? 'Yes' : 'No' }}</td>
                    <td class="border p-2">  {{ employee.passport_validity ? (employee.passport_validity | date:'dd-MMM-yyyy') : 'NA' }} </td>
                    <td class="border p-2">{{ employee.user_DOB | date:'dd-MMM-yyyy' }}</td>
                    <td class="border p-2">{{ employee.user_blood_group }}</td> -->

        <!-- Assign Details Modal -->
        <div *ngIf="showAssignDetailsModal" (click)="toggleAssignDetailsModal()"
            class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
            <div class="bg-white rounded-lg shadow-lg w-2/3 max-w-3xl relative p-6 h-[450px] overflow-y-auto"
                (click)="$event.stopPropagation()">
                <div class="flex justify-between items-center border-b pb-2">
                    <h3 class="text-xl font-semibold">
                        Assign Details for -
                        <span class="border p-2 rounded-md bg-gray-100">
                            {{ assignDetailsData.user_first_name }} {{ assignDetailsData.user_last_name }}
                        </span>
                    </h3> <button class="text-gray-500 hover:text-gray-700 text-2xl"
                        (click)="toggleAssignDetailsModal()">&times;</button>
                </div>

                <div class="mt-4">
                    <form #assignDetailsForm="ngForm"
                        (ngSubmit)="submitAssignDetails(assignDetailsForm); $event.preventDefault()">
                        <!-- Tab Buttons -->
                        <div class="flex space-x-4 border-b">
                            <button type="button" (click)="activeTab = 'personal'" [class]="activeTab === 'personal' ? 
                                    'border-b-2 border-blue-500 text-blue-500 font-semibold py-2 px-4' : 
                                    'text-gray-500 hover:text-gray-700 py-2 px-4'">
                                Personal Details
                            </button>
                            <button type="button" (click)="activeTab = 'organizational'" [class]="activeTab === 'organizational' ? 
                                    'border-b-2 border-blue-500 text-blue-500 font-semibold py-2 px-4' : 
                                    'text-gray-500 hover:text-gray-700 py-2 px-4'">
                                Organizational Details
                            </button>
                            <button type="button" (click)="activeTab = 'application'" [class]="activeTab === 'application' ? 
                                    'border-b-2 border-blue-500 text-blue-500 font-semibold py-2 px-4' : 
                                    'text-gray-500 hover:text-gray-700 py-2 px-4'">
                                Application Related Data
                            </button>
                        </div>


                        <div *ngIf="activeTab === 'personal'">
                            <!-- Personal Details -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label>Emergency Contact</label>
                                    <input type="text" [(ngModel)]="assignDetailsData.user_emergency_contact"
                                        #userEmergencyContact="ngModel" name="user_emergency_contact"
                                        class="border p-2 w-full rounded-md">

                                </div>

                                <div class="form-group">
                                    <label class="block">Passport Available?</label>
                                    <div class="flex space-x-4 mt-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="passport"
                                                [(ngModel)]="assignDetailsData.is_passport" value="1"
                                                (change)="onPassportChange($event)" />
                                            <span class="ml-2">Yes</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" [(ngModel)]="assignDetailsData.is_passport"
                                                name="passport" value="0" (change)="onPassportChange($event)" />
                                            <span class="ml-2">No</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form-group" *ngIf="hasPassport">
                                    <label>Validity of Passport</label>
                                    <input type="date" [(ngModel)]="assignDetailsData.passport_validity"
                                        #passportValidity="ngModel" name="passport_validity" required
                                        class="border p-2 w-full rounded-md">
                                    <span class="text-red-500 text-sm"
                                        *ngIf="passportValidity.invalid && passportValidity.touched">
                                        Passport validity is required
                                    </span>
                                </div>

                                <div class="form-group">
                                    <label>Current Address</label>
                                    <input type="text" [(ngModel)]="assignDetailsData.user_current_address"
                                        name="user_current_address" class="border p-2 w-full rounded-md">
                                </div>

                                <div class="form-group">
                                    <label>Date of Birth</label>
                                    <input type="date" [(ngModel)]="assignDetailsData.user_DOB" #userDOB="ngModel"
                                        name="user_DOB" class="border p-2 w-full rounded-md">

                                </div>


                                <div class="form-group">
                                    <label>Blood Group</label>
                                    <input type="text" class="border p-2 w-full rounded-md"
                                        [(ngModel)]="assignDetailsData.user_blood_group" #userBloodGroup="ngModel"
                                        name="user_blood_group" list="bloodGroupList"
                                        pattern="A\+|A-|B\+|B-|AB\+|AB-|O\+|O-|RH\+|RH-">

                                    <datalist id="bloodGroupList">
                                        <option value="A+"></option>
                                        <option value="A-"></option>
                                        <option value="B+"></option>
                                        <option value="B-"></option>
                                        <option value="AB+"></option>
                                        <option value="AB-"></option>
                                        <option value="O+"></option>
                                        <option value="O-"></option>
                                        <option value="RH+"></option>
                                        <option value="RH-"></option>
                                    </datalist>


                                </div>

                                <div class="form-group">
                                    <label>Date of Joining</label>
                                    <input type="date" [(ngModel)]="assignDetailsData.user_DOJ" #userDOJ="ngModel"
                                        name="user_DOJ" required class="border p-2 w-full rounded-md">

                                </div>
                            </div>
                        </div>

                        <div *ngIf="activeTab === 'organizational'">
                            <!-- Organizational Details -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label>Reporting Manager</label>
                                    <select [(ngModel)]="assignDetailsData.reporting_manager_id"
                                        #reportingManager="ngModel" name="reporting_manager_id"
                                        class="border p-2 w-full rounded-md">
                                        <option value="" disabled selected>Select Reporting Manager</option>
                                        <option *ngFor="let manager of optionUsers" [value]="manager.user_id">
                                            {{ manager.user_first_name }} {{ manager.user_last_name }}
                                        </option>
                                    </select>

                                </div>

                                <div class="form-group">
                                    <label>Designation</label>
                                    <select [(ngModel)]="assignDetailsData.designation_id" #designation="ngModel"
                                        name="designation_id" class="border p-2 w-full rounded-md">
                                        <option value="" disabled selected>Select Designation</option>
                                        <option *ngFor="let designation of optionDesignation"
                                            [value]="designation.designation_id">
                                            {{ designation.designation_name }}
                                        </option>
                                    </select>

                                </div>

                                <div class="form-group">
                                    <label>Timesheet Filling Required?</label>
                                    <select [(ngModel)]="assignDetailsData.is_timesheet_required"
                                        #timesheetRequired="ngModel" name="is_timesheet_required"
                                        class="border p-2 w-full rounded-md">
                                        <option value="" disabled selected>Select Option</option>
                                        <option value="1">Yes</option>
                                        <option value="0">No</option>
                                    </select>

                                </div>

                                <div class="form-group">
                                    <label>Department</label>
                                    <select [(ngModel)]="assignDetailsData.department_id" #department="ngModel"
                                        name="department_id" class="border p-2 w-full rounded-md">
                                        <option value="" disabled selected>Select Department</option>
                                        <option *ngFor="let department of optionDepartments"
                                            [value]="department.department_id">
                                            {{ department.department_name }}
                                        </option>
                                    </select>

                                </div>
                            </div>
                        </div>

                        <div *ngIf="activeTab === 'application'">
                            <!-- Application Related Data -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="form-group">
                                    <label>Role*</label>
                                    <select [(ngModel)]="assignDetailsData.role_id" #role="ngModel" name="role_id"
                                        class="border p-2 w-full rounded-md">
                                        <option value="" disabled selected>Select Role</option>
                                        <option *ngFor="let role of optioRoles" [value]="role.role_id">{{ role.role_name
                                            }}</option>
                                    </select>

                                </div>
                            </div>
                        </div>

                        <div class="mt-4 flex justify-center">
                            <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded">Assign
                                Details</button>
                        </div>
                    </form>

                </div>


            </div>
        </div>

    </div>

    <!-- Department Section -->
    <div *ngIf="selectedSection === 'department'">
        <h3 class="text-xl font-semibold mb-4">Add New Department</h3>



        <!-- Department Form -->
        <form #departmentForm="ngForm" (submit)="submitDepartment(departmentForm); $event.preventDefault()">
            <div class="grid grid-cols-6 gap-4">
                <!-- Department Name -->
                <div class="form-group">
                    <label>Department Name*</label>
                    <input type="text" [(ngModel)]="departmentName" #departmentNameField="ngModel" name="departmentName"
                        required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (departmentNameField.invalid && departmentNameField.touched) || (departmentForm.submitted && departmentNameField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="departmentNameField.invalid && (departmentNameField.touched || departmentForm.submitted)">
                        Department Name is required.
                    </span>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="mt-4">
                <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded">Add Department</button>
            </div>
        </form>

        <div class="rounded-lg w-full overflow-x-auto">
            <div class="rounded-lg w-full inline-block whitespace-nowrap">
                <table class="w-full border-collapse border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>
                            <th class="border p-2">Department Name</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let department of optionDepartments; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ department.department_name }}</td>
                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2"
                                    (click)="openDepartmentEditModal(department)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteDepartment(department.department_id)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Add this modal for editing department -->
        <div *ngIf="isEditDepartmentModalOpen"
            class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-white p-6 rounded-lg w-1/3">
                <h3 class="text-xl font-semibold mb-4">Edit Department</h3>
                <form #editDepartmentForm="ngForm"
                    (submit)="updateDepartment(editDepartmentForm); $event.preventDefault()">
                    <div class="form-group">
                        <label>Department Name*</label>
                        <input type="text" [(ngModel)]="editDepartmentName" #editDepartmentNameField="ngModel"
                            name="editDepartmentName" required class="border p-2 w-full rounded-md"
                            [ngClass]="{'border-red-500': (editDepartmentNameField.invalid && editDepartmentNameField.touched) || (editDepartmentForm.submitted && editDepartmentNameField.invalid)}" />
                        <span class="text-red-500 text-sm"
                            *ngIf="editDepartmentNameField.invalid && (editDepartmentNameField.touched || editDepartmentForm.submitted)">
                            Department Name is required.
                        </span>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
                            (click)="closeDepartmentEditModal()">Cancel</button>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update
                            Department</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Project Role Section -->
    <div *ngIf="selectedSection === 'project_role'">
        <h3 class="text-xl font-semibold mb-4">Add New Project Role</h3>

        <form #projectRoleForm="ngForm" (submit)="submitProjectRole(projectRoleForm); $event.preventDefault()">
            <div class="grid grid-cols-6 gap-4">
                <div class="form-group">
                    <label>Project Role Name*</label>
                    <input type="text" [(ngModel)]="projectRoleName" #projectRoleNameField="ngModel"
                        name="projectRoleName" required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (projectRoleNameField.invalid && projectRoleNameField.touched) || (projectRoleForm.submitted && projectRoleNameField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="projectRoleNameField.invalid && (projectRoleNameField.touched || projectRoleForm.submitted)">
                        Project Role Name is required.
                    </span>
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded">Add Project Role</button>
            </div>
        </form>

        <div class="rounded-lg w-full overflow-x-auto">
            <div class="rounded-lg w-full inline-block whitespace-nowrap">
                <table class="w-full border-collapse border border-gray-300 mt-4">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>
                            <th class="border p-2">Project Role Name</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let projectRole of projectRoles; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ projectRole.project_role_name }}</td>
                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2"
                                    (click)="openProjectRoleEditModal(projectRole)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteProjectRole(projectRole.project_role_id)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Edit Modal -->
        <div *ngIf="isProjectRoleEditModalOpen"
            class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            (click)="closeProjectRoleEditModal()">
            <div class="bg-white p-6 rounded-lg w-1/3" (click)="$event.stopPropagation()">
                <h3 class="text-xl font-semibold mb-4">Edit Project Role</h3>
                <form #editProjectRoleForm="ngForm"
                    (submit)="updateProjectRole(editProjectRoleForm); $event.preventDefault()">
                    <div class="form-group">
                        <label>Project Role Name*</label>
                        <input type="text" [(ngModel)]="editProjectRoleName" #editProjectRoleNameField="ngModel"
                            name="editProjectRoleName" required class="border p-2 w-full rounded-md"
                            [ngClass]="{'border-red-500': (editProjectRoleNameField.invalid && editProjectRoleNameField.touched) || (editProjectRoleForm.submitted && editProjectRoleNameField.invalid)}" />
                        <span class="text-red-500 text-sm"
                            *ngIf="editProjectRoleNameField.invalid && (editProjectRoleNameField.touched || editProjectRoleForm.submitted)">
                            Project Role Name is required.
                        </span>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
                            (click)="closeProjectRoleEditModal()">Cancel</button>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update Project
                            Role</button>
                    </div>
                </form>
            </div>
        </div>


    </div>


    <!-- Designation Section -->
    <div *ngIf="selectedSection === 'designation'">
        <h3 class="text-xl font-semibold mb-4">Add New Designation</h3>

        <form #designationForm="ngForm" (submit)="submitDesignation(designationForm); $event.preventDefault()">
            <div class="grid grid-cols-6 gap-4">
                <div class="form-group">
                    <label>Designation Name*</label>
                    <input type="text" [(ngModel)]="designationName" #designationNameField="ngModel"
                        name="designationName" required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (designationNameField.invalid && designationNameField.touched) || (designationForm.submitted && designationNameField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="designationNameField.invalid && (designationNameField.touched || designationForm.submitted)">
                        Designation Name is required.
                    </span>
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded">Add Designation</button>
            </div>
        </form>

        <div class="rounded-lg w-full overflow-x-auto">
            <div class="rounded-lg w-full inline-block whitespace-nowrap">
                <table class="w-full border-collapse border border-gray-300 mt-4">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>
                            <th class="border p-2">Designation Name</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let designation of designations; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ designation.designation_name }}</td>
                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2"
                                    (click)="editDesignationModule(designation)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteDesignation(designation.designation_id)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Edit Modal -->
        <div *ngIf="isDesignationModalOpen"
            class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            (click)="closeDesignationModule()">
            <div class="bg-white p-6 rounded-lg w-1/3" (click)="$event.stopPropagation()">
                <h3 class="text-xl font-semibold mb-4">Edit Designation</h3>
                <form #editDesignationForm="ngForm"
                    (submit)="updateDesignation(editDesignationForm); $event.preventDefault()">
                    <div class="form-group">
                        <label>Designation Name*</label>
                        <input type="text" [(ngModel)]="editDesignationName" #editDesignationNameField="ngModel"
                            name="editDesignationName" required class="border p-2 w-full rounded-md"
                            [ngClass]="{'border-red-500': (editDesignationNameField.invalid && editDesignationNameField.touched) || (editDesignationForm.submitted && editDesignationNameField.invalid)}" />
                        <span class="text-red-500 text-sm"
                            *ngIf="editDesignationNameField.invalid && (editDesignationNameField.touched || editDesignationForm.submitted)">
                            Designation Name is required.
                        </span>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
                            (click)="closeDesignationModule()">Cancel</button>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update
                            Designation</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Skills Section -->
    <div *ngIf="selectedSection === 'skills'">
        <!-- Add Skill Button -->
        <h3 class="text-xl font-semibold mb-4">Add New Skill</h3>


        <form #skillForm="ngForm" (submit)="submitSkill(skillForm); $event.preventDefault();">
            <div class="grid grid-cols-6 gap-4">

                <!-- Skill Name -->
                <div class="form-group">
                    <label>Skill Name*</label>
                    <input type="text" [(ngModel)]="skillName" #skillNameField="ngModel" name="skillName" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (skillNameField.invalid && skillNameField.touched) || (skillForm.submitted && skillNameField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="skillNameField.invalid && (skillNameField.touched || skillForm.submitted)">
                        Skill Name is required.
                    </span>
                </div>

                <!-- Skill Category -->
                <!-- Skill Category -->
                <div class="form-group">
                    <label>Skill Category*</label>
                    <select [(ngModel)]="skillCategory" #skillCategoryField="ngModel" name="skillCategory" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (skillCategoryField.invalid && skillCategoryField.touched) || (skillForm.submitted && skillCategoryField.invalid)}">
                        <option value="" disabled selected>Select Category</option>
                        <option value="technical">Technical</option>
                        <option value="soft-skill">Soft Skill</option>
                        <option value="management">Management</option>
                        <option value="other">Other</option>
                    </select>
                    <span class="text-red-500 text-sm"
                        *ngIf="skillCategoryField.invalid && (skillCategoryField.touched || skillForm.submitted)">
                        Skill Category is required.
                    </span>
                </div>

                <!-- Skill Description -->
                <!-- Skill Description -->
                <div class="form-group">
                    <label>Skill Description</label>
                    <textarea [(ngModel)]="skillDescription" name="skillDescription"
                        class="border p-2 w-full rounded-md" rows="1" placeholder="Enter skill details..."></textarea>
                </div>
            </div>
            <!-- Save Button -->
            <div class="mt-4">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Add Skill</button>
            </div>
        </form>


        <div class="rounded-lg w-full overflow-x-auto">
            <div class="rounded-lg w-full inline-block whitespace-nowrap">

                <!-- Skills Table -->
                <table class="w-full border-collapse border border-gray-300 mt-4">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>
                            <th class="border p-2">Skill Name</th>
                            <th class="border p-2">Category</th>
                            <th class="border p-2">Skill Category</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let skill of skills; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ skill.skill_name }}</td>
                            <td class="border p-2">{{ skill.skill_category }}</td>
                            <td class="border p-2">{{ skill.skill_description }}</td>

                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2"
                                    (click)="openEditSkillModal(skill)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteSkill(skill.skill_id)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Edit Modal -->
        <div *ngIf="isSkillModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            (click)="closeSkillModal()">
            <div class="bg-white p-6 rounded-lg w-1/3" (click)="$event.stopPropagation()">
                <h3 class="text-xl font-semibold mb-4">Edit Skill</h3>
                <form #editSkillForm="ngForm" (submit)="updateSkill(editSkillForm); $event.preventDefault()">
                    <div class="grid grid-cols-3 gap-4">
                        <!-- Skill Name -->
                        <div class="form-group">
                            <label>Skill Name*</label>
                            <input type="text" [(ngModel)]="editSkillName" #editSkillNameField="ngModel"
                                name="editSkillName" required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editSkillNameField.invalid && editSkillNameField.touched) || (editSkillForm.submitted && editSkillNameField.invalid)}" />
                            <span class="text-red-500 text-sm"
                                *ngIf="editSkillNameField.invalid && (editSkillNameField.touched || editSkillForm.submitted)">
                                Skill Name is required.
                            </span>
                        </div>

                        <!-- Skill Category -->
                        <div class="form-group">
                            <label>Skill Category*</label>
                            <select [(ngModel)]="editSkillCategory" #editSkillCategoryField="ngModel"
                                name="editSkillCategory" required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editSkillCategoryField.invalid && editSkillCategoryField.touched) || (editSkillForm.submitted && editSkillCategoryField.invalid)}">
                                <option value="" disabled selected>Select Category</option>
                                <option value="technical">Technical</option>
                                <option value="soft-skill">Soft Skill</option>
                                <option value="management">Management</option>
                                <option value="other">Other</option>
                            </select>
                            <span class="text-red-500 text-sm"
                                *ngIf="editSkillCategoryField.invalid && (editSkillCategoryField.touched || editSkillForm.submitted)">
                                Skill Category is required.
                            </span>
                        </div>

                        <!-- Skill Description -->
                        <div class="form-group">
                            <label>Skill Description</label>
                            <textarea [(ngModel)]="editSkillDescription" name="editSkillDescription"
                                class="border p-2 w-full rounded-md" rows="1"
                                placeholder="Enter skill details..."></textarea>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
                            (click)="closeSkillModal()">Cancel</button>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update Skill</button>
                    </div>
                </form>
            </div>
        </div>

    </div>


    <!-- Reporting Manager History Section -->
    <div *ngIf="selectedSection === 'reportingManagerHistory'">
        <!-- Add Reporting Manager Button -->
        <h3 class="text-xl font-semibold mb-4">Add Reporting Manager</h3>


        <!-- Reporting Manager Modal -->

        <form #reportingManagerForm="ngForm"
            (ngSubmit)="onSubmitReportingManager(reportingManagerForm); $event.preventDefault();">
            <div class="grid grid-cols-6 gap-4">
                <!-- Employee Name Dropdown -->
                <!-- Employee Name Dropdown -->
                <div class="form-group">
                    <label class="block mb-2 font-semibold">Employee Name*</label>
                    <select [(ngModel)]="employee.selectedUserId" #employeeField="ngModel" name="user" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (employeeField.invalid && employeeField.touched) || (reportingManagerForm.submitted && employeeField.invalid)}">
                        <option value="" disabled selected>Select Employee</option>
                        <option *ngFor="let user of optionUsers" [value]="user.user_id">
                            {{ user.user_first_name }} {{ user.user_last_name }}
                        </option>
                    </select>
                    <span class="text-red-500 text-sm"
                        *ngIf="employeeField.invalid && (employeeField.touched || reportingManagerForm.submitted)">
                        Employee Name is required.
                    </span>
                </div>

                <!-- Reporting Manager Dropdown -->
                <!-- Reporting Manager Dropdown -->
                <div class="form-group">
                    <label class="block mb-2 font-semibold">Reporting Manager*</label>
                    <select [(ngModel)]="employee.selectedReportingManagerId" #managerField="ngModel"
                        name="reporting_manager" required class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (managerField.invalid && managerField.touched) || (reportingManagerForm.submitted && managerField.invalid)}">
                        <option value="" disabled selected>Select Reporting Manager</option>
                        <option *ngFor="let user of optionUsers" [value]="user.user_id">
                            {{ user.user_first_name }} {{ user.user_last_name }}
                        </option>
                    </select>
                    <span class="text-red-500 text-sm"
                        *ngIf="managerField.invalid && (managerField.touched || reportingManagerForm.submitted)">
                        Reporting Manager is required.
                    </span>
                </div>



                <!-- From Date -->
                <!-- From Date -->
                <div class="form-group">
                    <label class="block mb-2 font-semibold">From Date*</label>
                    <input type="date" [(ngModel)]="fromDate" #fromDateField="ngModel" name="fromDate" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (fromDateField.invalid && fromDateField.touched) || (reportingManagerForm.submitted && fromDateField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="fromDateField.invalid && (fromDateField.touched || reportingManagerForm.submitted)">
                        From Date is required.
                    </span>
                </div>

                <!-- Till Date -->
                <div class="form-group">
                    <label class="block mb-2 font-semibold">Till Date*</label>
                    <input type="date" [(ngModel)]="tillDate" #tillDateField="ngModel" name="tillDate" required
                        class="border p-2 w-full rounded-md"
                        [ngClass]="{'border-red-500': (tillDateField.invalid && tillDateField.touched) || (reportingManagerForm.submitted && tillDateField.invalid)}" />
                    <span class="text-red-500 text-sm"
                        *ngIf="tillDateField.invalid && (tillDateField.touched || reportingManagerForm.submitted)">
                        Till Date is required.
                    </span>
                </div>
            </div>

            <!-- Save Button -->
            <div class="mt-4">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Submit</button>
            </div>
        </form>

        <div class="rounded-lg w-full overflow-x-auto">
            <div class="rounded-lg w-full inline-block whitespace-nowrap">

                <!-- Reporting Manager History Table -->
                <table class="w-full border-collapse border border-gray-300 mt-4">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">S.No.</th>

                            <th class="border p-2">Employee Name</th>
                            <th class="border p-2">Reporting Manager Name</th>
                            <th class="border p-2">From Date</th>
                            <th class="border p-2">till Date</th>
                            <th class="border p-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let manager of reportingManagerHistory; let i = index" class="hover:bg-gray-50">
                            <td class="border p-2">{{ i + 1 }}</td>
                            <td class="border p-2">{{ manager.employee_first_name }} {{ manager.employee_last_name }}
                            </td>
                            <td class="border p-2">{{ manager.manager_first_name }} {{ manager.manager_last_name }}</td>
                            <td class="border p-2">{{ manager.from_date | date:'dd-MMM-yyyy' }}</td>
                            <td class="border p-2">{{ manager.till_date | date:'dd-MMM-yyyy' }}</td>
                            <td class="border p-2">
                                <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2"
                                    (click)="openEditModal(manager)">Edit</button>
                                <button class="bg-red-500 text-white px-2 py-1 rounded"
                                    (click)="deleteReportingManager(manager.reporting_manager_history_id)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Edit Modal -->
        <div *ngIf="isEditModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            (click)="closeEditModal()">
            <div class="bg-white p-6 rounded-lg w-auto" (click)="$event.stopPropagation()">
                <h3 class="text-xl font-semibold mb-4">Edit Reporting Manager History</h3>
                <form #editReportingManagerForm="ngForm"
                    (ngSubmit)="updateReportingManager(editReportingManagerForm); $event.preventDefault()">
                    <div class="grid grid-cols-4 gap-4">
                        <!-- Employee Name Dropdown -->
                        <div class="form-group">
                            <label class="block mb-2 font-semibold">Employee Name*</label>
                            <select [(ngModel)]="editEmployeeId" #editEmployeeField="ngModel" name="editEmployee"
                                required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editEmployeeField.invalid && editEmployeeField.touched) || (editReportingManagerForm.submitted && editEmployeeField.invalid)}">
                                <option value="" disabled selected>Select Employee</option>
                                <option *ngFor="let user of optionUsers" [value]="user.user_id">
                                    {{ user.user_first_name }} {{ user.user_last_name }}
                                </option>
                            </select>
                            <span class="text-red-500 text-sm"
                                *ngIf="editEmployeeField.invalid && (editEmployeeField.touched || editReportingManagerForm.submitted)">
                                Employee Name is required.
                            </span>
                        </div>

                        <!-- Reporting Manager Dropdown -->
                        <div class="form-group">
                            <label class="block mb-2 font-semibold">Reporting Manager*</label>
                            <select [(ngModel)]="editReportingManagerId" #editManagerField="ngModel"
                                name="editReportingManager" required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editManagerField.invalid && editManagerField.touched) || (editReportingManagerForm.submitted && editManagerField.invalid)}">
                                <option value="" disabled selected>Select Reporting Manager</option>
                                <option *ngFor="let user of optionUsers" [value]="user.user_id">
                                    {{ user.user_first_name }} {{ user.user_last_name }}
                                </option>
                            </select>
                            <span class="text-red-500 text-sm"
                                *ngIf="editManagerField.invalid && (editManagerField.touched || editReportingManagerForm.submitted)">
                                Reporting Manager is required.
                            </span>
                        </div>

                        <!-- From Date -->
                        <div class="form-group">
                            <label class="block mb-2 font-semibold">From Date*</label>
                            <input type="date" [(ngModel)]="editFromDate" #editFromDateField="ngModel"
                                name="editFromDate" required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editFromDateField.invalid && editFromDateField.touched) || (editReportingManagerForm.submitted && editFromDateField.invalid)}" />
                            <span class="text-red-500 text-sm"
                                *ngIf="editFromDateField.invalid && (editFromDateField.touched || editReportingManagerForm.submitted)">
                                From Date is required.
                            </span>
                        </div>

                        <!-- Till Date -->
                        <div class="form-group">
                            <label class="block mb-2 font-semibold">Till Date*</label>
                            <input type="date" [(ngModel)]="editTillDate" #editTillDateField="ngModel"
                                name="editTillDate" required class="border p-2 w-full rounded-md"
                                [ngClass]="{'border-red-500': (editTillDateField.invalid && editTillDateField.touched) || (editReportingManagerForm.submitted && editTillDateField.invalid)}" />
                            <span class="text-red-500 text-sm"
                                *ngIf="editTillDateField.invalid && (editTillDateField.touched || editReportingManagerForm.submitted)">
                                Till Date is required.
                            </span>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
                            (click)="closeEditModal()">Cancel</button>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>