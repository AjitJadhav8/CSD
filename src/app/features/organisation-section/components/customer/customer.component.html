<div class="p-4">
    <!-- Top Buttons -->
    <div class="flex space-x-4 mb-4">
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="selectedSection = 'customer'">Customer</button>
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-900 py-2 px-4 rounded-md"
            (click)="selectedSection = 'customerDomain'">Customer Domain</button>
    </div>

    <!-- Customer Section -->
    <div *ngIf="selectedSection === 'customer'">
        <button class="bg-green-500 text-white px-4 py-2 rounded mb-4" (click)="toggleModal()">+ Add Customer</button>

        <!-- Add Customer Form -->
        <!-- Modal -->
        <div *ngIf="showModal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center"
            (click)="toggleModal()">
            <div class="bg-white rounded-lg shadow-lg p-6 w-1/2 relative" (click)="$event.stopPropagation()">
                <!-- Modal Header with Close Button -->
                <div class="flex justify-between items-center border-b pb-2">
                    <h3 class="text-xl font-semibold">Add New Customer</h3>
                    <button class="text-gray-500 hover:text-gray-700 text-2xl" (click)="toggleModal()">&times;</button>
                </div>

                <form class="mt-4" (ngSubmit)="submitForm()">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-group">
                            <label>Customer Name*</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.customerName"
                                name="customerName" required>
                        </div>
                        <div class="form-group">
                            <label>Company Website</label>
                            <input type="text" class="border p-2 w-full rounded-md"
                                [(ngModel)]="customer.companyWebsite" name="companyWebsite">
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" class="border p-2 w-full rounded-md" [(ngModel)]="customer.email"
                                name="email">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.phone"
                                name="phone">
                        </div>
                        <div class="form-group">
                            <label>Alternate Phone Number</label>
                            <input type="text" class="border p-2 w-full rounded-md"
                                [(ngModel)]="customer.alternatePhone" name="alternatePhone">
                        </div>
                        <div class="form-group">
                            <label>Customer Status</label>
                            <select class="border p-2 w-full rounded-md" [(ngModel)]="customer.status" name="status">
                                <option value="" disabled>Select Status</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>


                        <div class="form-group">
                            <label>Customer Sector</label>
                            <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedSector" name="sector"
                                (change)="filterIndustries()">
                                <option value="" disabled selected>Select Sector</option>
                                <option *ngFor="let sector of sectors" [value]="sector">{{ sector }}</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Customer Industry</label>
                            <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedIndustry" name="industry"
                                (change)="filterDomains()">
                                <option value="" disabled selected>Select Industry</option>
                                <option *ngFor="let industry of industries" [value]="industry">{{ industry }}</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Customer Domain</label>
                            <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedDomain" name="domain">
                                <option value="" disabled selected>Select Domain</option>
                                <option *ngFor="let domain of domains" [value]="domain">{{ domain }}</option>
                            </select>
                        </div>


                        <div class="form-group">
                            <label>Customer Type</label>
                            <select class="border p-2 w-full rounded-md" [(ngModel)]="customer.customerType"
                                name="customerType">
                                <option value="" disabled selected>Select Customer Type</option>
                                <option value="Existing">Existing</option>
                                <option value="Potential">Potential</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>City</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.city"
                                name="city">
                        </div>
                        <div class="form-group">
                            <label>State</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.state"
                                name="state">
                        </div>
                        <div class="form-group">
                            <label>Pincode</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.pincode"
                                name="pincode">
                        </div>
                        <div class="form-group">
                            <label>Country</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.country"
                                name="country">
                        </div>
                        <div class="form-group">
                            <label>Customer Description</label>
                            <input type="text" class="border p-2 w-full rounded-md" [(ngModel)]="customer.description"
                                name="description">
                        </div>
                    </div>

                    <div class="mt-4 flex space-x-2">
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Add New Customer</button>
                    </div>
                </form>

            </div>
        </div>
        <!-- Customer Table -->
        <h3 class="mt-6 font-bold">Customer List</h3>
        <table class="w-full border-collapse border border-gray-300 mt-4">
            <thead>
                <tr class="bg-gray-100">
                    <th class="border p-2">S.No.</th>
                    <th class="border p-2">Customer Name</th>
                    <th class="border p-2">Company Website</th>
                    <th class="border p-2">Email Address</th>
                    <th class="border p-2">Phone Number</th>
                    <th class="border p-2">Alternate Phone Number</th>
                    <th class="border p-2">Customer Status</th>
                    <th class="border p-2">Customer Sector</th>
                    <th class="border p-2">Customer Industry</th>
                    <th class="border p-2">Customer Domain</th>
                    <th class="border p-2">Customer Type</th>
                    <th class="border p-2">City</th>
                    <th class="border p-2">State</th>
                    <th class="border p-2">Pincode</th>
                    <th class="border p-2">Country</th>
                    <th class="border p-2">Customer Description</th>
                    <th class="border p-2">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let customer of customers; let i = index" class="hover:bg-gray-50">
                    <td class="border p-2">{{ i + 1 }}</td> <!-- Serial Number -->
                    
                    <td class="border p-2">{{ customer.customer_name }}</td>
                    <td class="border p-2">{{ customer.customer_company_website }}</td>
                    <td class="border p-2">{{ customer.customer_email }}</td>
                    <td class="border p-2">{{ customer.customer_phone }}</td>
                    <td class="border p-2">{{ customer.customer_alternate_phone }}</td>
                    <td class="border p-2">{{ customer.is_active ? 'Active' : 'Inactive' }}</td>
                    <td class="border p-2">{{ customer.sector || '-' }}</td>
                    <td class="border p-2">{{ customer.industry || '-' }}</td>
                    <td class="border p-2">{{ customer.domain || '-' }}</td>
                    <td class="border p-2">{{ customer.is_new ? 'Potential' : 'Existing' }}</td>
                    <td class="border p-2">{{ customer.customer_city }}</td>
                    <td class="border p-2">{{ customer.customer_state }}</td>
                    <td class="border p-2">{{ customer.customer_pincode }}</td>
                    <td class="border p-2">{{ customer.customer_country }}</td>
                    <td class="border p-2">{{ customer.customer_description }}</td>
                    <td class="border p-2">
                        <button class="bg-red-500 text-white px-2 py-1 rounded"
                        (click)="deleteCustomer(customer.customer_id)">Delete</button>
                    </td>
                    
                </tr>
            </tbody>
        </table>
        
    </div>


    <!-- Customer Domain Section -->
    <div *ngIf="selectedSection === 'customerDomain'">
        <button class="bg-green-500 text-white px-4 py-2 rounded mb-4" (click)="toggleDomainModal()">+ Add
            Domain</button>

        <!-- Add Domain Form -->
        <!-- Modal -->
        <div *ngIf="showDomainModal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center"
            (click)="toggleDomainModal()">
            <div class="bg-white rounded-lg shadow-lg p-6 w-1/3 relative" (click)="$event.stopPropagation()">
                <!-- Modal Header with Close Button -->
                <div class="flex justify-between items-center border-b pb-2">
                    <h3 class="text-xl font-semibold">Add New Domain</h3>
                    <button class="text-gray-500 hover:text-gray-700 text-2xl"
                        (click)="toggleDomainModal()">&times;</button>
                </div>

                <!-- Form Content -->
                <form class="mt-4">
                    <!-- Sector Dropdown -->
                    <label class="block mb-2 font-semibold">Sector*</label>
                    <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedSector" name="sector"
                        (change)="filterIndustries()">
                        <option value="" disabled selected>Select Sector</option>
                        <option *ngFor="let sector of sectors" [value]="sector">{{ sector }}</option>
                    </select>

                    <!-- Industry Dropdown -->
                    <label class="block mt-4 mb-2 font-semibold">Industry*</label>
                    <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedIndustry" name="industry"
                        (change)="filterDomains()">
                        <option value="" disabled selected>Select Industry</option>
                        <option *ngFor="let industry of industries" [value]="industry">{{ industry }}</option>
                    </select>

                    <!-- Domain Dropdown -->
                    <label class="block mt-4 mb-2 font-semibold">Domain Name*</label>
                    <select class="border p-2 w-full rounded-md" [(ngModel)]="selectedDomain" name="domain">
                        <option value="" disabled selected>Select Domain</option>
                        <option *ngFor="let domain of domains" [value]="domain">{{ domain }}</option>
                    </select>

                    <!-- Save Button -->
                    <div class="mt-4 flex space-x-2">
                        <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded">Save</button>
                    </div>
                </form>

            </div>
        </div>

        <!-- Domain Table -->
        <table class="w-full border-collapse border border-gray-300 mt-4">
            <thead>
              <tr class="bg-gray-100">
                <th class="border p-2">S.No.</th>

                <th class="border p-2">Sector</th>
                <th class="border p-2">Industry</th>
                <th class="border p-2">Domain</th>
                <th class="border p-2">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let domain of customerDomains; let i = index" class="hover:bg-gray-50">
                <td class="border p-2">{{ i + 1 }}</td> <!-- Serial Number -->

                    <td class="border p-2">{{ domain.sector }}</td>
                    <td class="border p-2">{{ domain.industry }}</td>
                    <td class="border p-2">{{ domain.domain }}</td>
                    <td class="border p-2">
                        <button class="bg-red-500 text-white px-2 py-1 rounded" (click)="deleteDomain(domain.category_id)">
                            Delete
                        </button>
                </td>
              </tr>
            </tbody>
          </table>
          
    </div>


</div>