<div class="grid grid-cols-5 gap-4">
    <!-- Row 1 -->
    <div>
        <label class="block mb-2 font-semibold">Customer Name*</label>
        <select [(ngModel)]="selectedCustomerId" name="customer" (change)="filterProjects()"
            class="border p-2 w-full rounded-md">
            <option value="" disabled selected>Select Customer</option>
            <option *ngFor="let customer of optionCustomers" [value]="customer.customer_id">
                {{ customer.customer_name }}
            </option>
        </select>
    </div>

    <div>
        <label class="block mb-2 font-semibold">Project Name*</label>
        <select [(ngModel)]="selectedProjectId" [disabled]="filteredProjects.length === 0"
            class="border p-2 w-full rounded-md" (change)="onProjectChange($event)">
            <option value="" disabled selected>Select Project</option>
            <option *ngFor="let project of filteredProjects" [value]="project.project_id">
                {{ project.project_name }}
            </option>
        </select>
    </div>


    <div>
        <label class="block mb-2 font-semibold">Project Manager*</label>
        <input type="text" 
               class="border p-2 w-full rounded-md bg-gray-100" 
               [value]="selectedProjectManagerName || 'Not Assigned'" 
               readonly />
    </div>
    

    <div>
        <label class="block mb-2 font-semibold">Employee Name*</label>
        <select [(ngModel)]="selectedEmployeeId" name="employee" class="border p-2 w-full rounded-md">
            <option value="" disabled selected>Select Employee</option>
            <option *ngFor="let employee of optionEmployees" [value]="employee.user_id">
                {{ employee.user_first_name }} {{ employee.user_last_name }}
            </option>
        </select>
    </div>

    <div>
        <label class="block mb-2 font-semibold">Project Role*</label>
        <select [(ngModel)]="selectedProjectRoleId" name="projectRole" class="border p-2 w-full rounded-md">
            <option value="" disabled selected>Select Project Role</option>
            <option *ngFor="let role of optionProjectRoles" [value]="role.position_id">
                {{ role.position_name }}
            </option>
        </select>
    </div>

   

    <!-- Row 2 -->
    <div>
        <label class="block mb-2 font-semibold">Start Date*</label>
        <input type="date" [(ngModel)]="startDate" name="startDate" class="border p-2 w-full rounded-md">
    </div>

    <div>
        <label class="block mb-2 font-semibold">Tentative End Date</label>
        <input type="date" [(ngModel)]="tentativeEndDate" name="tentativeEndDate" class="border p-2 w-full rounded-md">
    </div>

    <div>
        <label class="block mb-2 font-semibold">Allocation Status*</label>
        <select [(ngModel)]="selectedAllocationStatus" name="allocationStatus" class="border p-2 w-full rounded-md">
            <option value="" disabled selected>Select Allocation Status</option>
            <option *ngFor="let status of allocationStatuses" [value]="status">
                {{ status }}
            </option>
        </select>
    </div>

    <div>
        <label class="block mb-2 font-semibold">Allocation Percentage*</label>
        <select [(ngModel)]="selectedAllocationPercentage" name="allocationPercentage"
            class="border p-2 w-full rounded-md">
            <option value="" disabled selected>Select Allocation Percentage</option>
            <option *ngFor="let percentage of allocationPercentages" [value]="percentage">
                {{ percentage }}%
            </option>
        </select>
    </div>
</div>

<!-- Submit Button -->
<div class="mt-6 flex justify-end">
    <button (click)="submitAssignProjectTeam()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
        Submit
    </button>
</div>

<table class="w-full border-collapse border border-gray-300 mt-4">
    <thead>
        <tr class="bg-gray-100">
            <th class="border p-2">Sr No</th>
            <th class="border p-2">Customer Name</th>
            <th class="border p-2">Project Name</th>
            <th class="border p-2">Employee Name</th>
            <th class="border p-2">Project Role</th>
            <th class="border p-2">Project Manager</th>
            <th class="border p-2">Start Date</th>
            <th class="border p-2">End Date</th>
            <th class="border p-2">Allocation Status</th>
            <th class="border p-2">Allocation %</th>
            <th class="border p-2">Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let team of assignedProjectTeams; let i = index" class="hover:bg-gray-50">
            <td class="border p-2">{{ i + 1 }}</td>
            <td class="border p-2">{{ team.customer_name }}</td>
            <td class="border p-2">{{ team.project_name }}</td>
            <td class="border p-2">{{ team.employee_name }}</td>
            <td class="border p-2">{{ team.project_role }}</td>
            <td class="border p-2">{{ team.project_manager_name }}</td>
            <td class="border p-2">{{ team.start_date | date:'dd-MMM-yyyy' }}</td>
            <td class="border p-2">{{ team.end_date  | date:'dd-MMM-yyyy' }}</td>
            <td class="border p-2">{{ team.allocation_status }}</td>
            <td class="border p-2">{{ team.allocation_percentage }}%</td>
            <td class="border p-2">
                <button class="bg-red-500 text-white px-2 py-1 rounded" (click)="deleteAssignProjectTeam(team.project_team_id)" >
                    Delete
                </button>
            </td>
        </tr>
    </tbody>
</table>

